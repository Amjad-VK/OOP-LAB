class Q {
int n;
boolean valueSet =false;
synchronized int get() {
while(!valueSet)
try {
wait();
} catch(InterruptedException e) {
System.out.println("InterruptedException caught");
}
System.out.println("Got: " + n);
valueSet=false;
notify();
return n;
}

synchronized void put(int n) {
while(valueSet)
try {
wait();
} catch(InterruptedException e) {
System.out.println("InterruptedException caught");
}
this.n=n;
valueSet=true;
System.out.println("Put: " + n);
notify();
}
}

class Producer implements Runnable {
Q q;
Thread t;
Producer(Q q) {
this.q=q;
t = new Thread(this, "Producer");
}
public void run() {
int i =0;
while(true) {
q.put(i++);

}
}
}

class Consumer implements Runnable {
Q q;
Thread t;
Consumer(Q q) {
this.q=q;
t = new Thread(this, "Consumer");
}
public void run() {
while(true) {
q.get();
}
}
}

class ProducerConsumer{
public static void main(String args []){
Q q = new Q();
Producer p = new Producer(q);
Consumer c = new Consumer(q);
// Start the threads.
p.t.start();
c.t.start();
System.out.println("Press Control C to stop.");
}
}



/*
E:\ONLINE CLASS\S2\OOP\Exercises\Exercise 7>java ProducerConsumer
Press Control C to stop.
Put: 0
Got: 0
Put: 1
Got: 1
Put: 2
Got: 2
Put: 3
Got: 3
Put: 4
Got: 4
Put: 5
Got: 5
Put: 6
Got: 6
Put: 7
Got: 7
Put: 8
Got: 8
Put: 9
Got: 9
Put: 10
Got: 10
Put: 11
Got: 11
Put: 12
Got: 12
Put: 13
Got: 13
Put: 14
Got: 14
Put: 15
Got: 15
Put: 16
Got: 16
Put: 17
Got: 17
Put: 18
Got: 18
Put: 19
Got: 19
Put: 20
Got: 20
Put: 21
Got: 21
Put: 22
Got: 22
Put: 23
Got: 23
Put: 24
Got: 24
Put: 25
Got: 25
Put: 26
Got: 26
Put: 27
Got: 27
Put: 28
Got: 28
Put: 29
Got: 29
Put: 30
Got: 30
Put: 31
Got: 31
Put: 32
Got: 32
Put: 33
Got: 33
Put: 34
Got: 34
Put: 35
Got: 35
Put: 36
Got: 36
Put: 37
Got: 37
Put: 38
Got: 38
Put: 39
Got: 39
Put: 40
Got: 40
Put: 41
Got: 41
Put: 42
Got: 42
Put: 43
Got: 43
Put: 44
Got: 44
Put: 45
Got: 45
Put: 46
Got: 46
Put: 47
Got: 47
Put: 48
Got: 48
Put: 49
Got: 49
Put: 50
Got: 50
Put: 51
Got: 51
Put: 52
Got: 52
Put: 53
Got: 53
Put: 54
Got: 54
Put: 55
Got: 55
Put: 56
Got: 56
Put: 57
Got: 57
Put: 58
Got: 58
Put: 59
Got: 59
Put: 60
Got: 60
Put: 61
Got: 61
Put: 62
Got: 62
Put: 63
Got: 63
Put: 64
Got: 64
Put: 65
Got: 65
Put: 66
Got: 66
Put: 67
Got: 67
Put: 68
Got: 68
Put: 69
Got: 69
Put: 70
Got: 70
Put: 71
Got: 71
Put: 72
Got: 72
Put: 73
Got: 73
Put: 74
Got: 74
Put: 75
Got: 75
Put: 76
Got: 76
Put: 77
Got: 77
Put: 78
Got: 78
Put: 79
Got: 79
Put: 80
Got: 80
Put: 81
Got: 81
Put: 82
Got: 82
Put: 83
Got: 83
Put: 84
Got: 84
Put: 85
Got: 85
Put: 86
Got: 86
Put: 87
Got: 87
Put: 88
Got: 88
Put: 89
Got: 89
Put: 90
Got: 90
Put: 91
Got: 91
Put: 92
Got: 92
Put: 93
Got: 93
Put: 94
Got: 94
Put: 95
Got: 95
Put: 96
Got: 96
Put: 97
Got: 97
Put: 98
Got: 98
Put: 99
Got: 99
Put: 100
Got: 100
Put: 101
Got: 101
Put: 102
Got: 102
Put: 103
Got: 103
Put: 104
Got: 104
Put: 105
Got: 105
Put: 106
Got: 106
Put: 107
Got: 107
Put: 108
Got: 108
Put: 109
Got: 109
Put: 110
Got: 110
Put: 111
Got: 111
Put: 112
Got: 112
Put: 113
Got: 113
Put: 114
Got: 114
Put: 115
Got: 115
Put: 116
Got: 116
Put: 117
Got: 117
Put: 118
Got: 118
Put: 119
Got: 119
Put: 120
Got: 120
Put: 121
Got: 121
Put: 122
Got: 122
Put: 123
Got: 123
Put: 124
Got: 124
Put: 125
Got: 125
Put: 126
Got: 126
Put: 127
Got: 127
Put: 128
Got: 128
Put: 129
Got: 129
Put: 130
Got: 130
Put: 131
Got: 131
Put: 132
Got: 132
Put: 133
Got: 133
Put: 134
Got: 134
Put: 135
Got: 135
Put: 136
Got: 136
Put: 137
Got: 137
Put: 138
Got: 138
Put: 139
Got: 139
Put: 140
Got: 140
Put: 141
Got: 141
Put: 142
Got: 142
Put: 143
Got: 143
Put: 144
Got: 144
Put: 145
Got: 145
Put: 146
Got: 146
Put: 147
Got: 147
Put: 148
Got: 148
Put: 149
Got: 149
Put: 150
Got: 150
Put: 151
Got: 151
Put: 152
Got: 152
Put: 153
Got: 153
Put: 154
Got: 154
Put: 155
Got: 155
Put: 156
Got: 156
Put: 157
Got: 157
Put: 158
Got: 158
Put: 159
Got: 159
Put: 160
Got: 160
Put: 161
Got: 161
Put: 162
Got: 162
Put: 163
Got: 163
Put: 164
Got: 164
Put: 165
Got: 165
Put: 166
Got: 166
Put: 167
Got: 167
Put: 168
Got: 168
Put: 169
Got: 169
Put: 170
Got: 170
Put: 171
Got: 171
Put: 172
Got: 172
Put: 173
Got: 173
Put: 174
Got: 174
Put: 175
Got: 175
Put: 176
Got: 176
Put: 177
Got: 177
Put: 178
Got: 178
Put: 179
Got: 179
Put: 180
Got: 180
Put: 181
Got: 181
Put: 182
Got: 182
Put: 183
Got: 183
Put: 184
Got: 184
Put: 185
Got: 185
Put: 186
Got: 186
Put: 187
Got: 187
Put: 188
Got: 188
Put: 189
Got: 189
Put: 190
Got: 190
Put: 191
Got: 191
Put: 192
Got: 192
Put: 193
Got: 193
Put: 194
Got: 194
Put: 195
Got: 195
Put: 196
Got: 196
Put: 197
Got: 197
Put: 198
Got: 198
Put: 199
Got: 199
Put: 200
Got: 200
Put: 201
Got: 201
Put: 202
Got: 202
Put: 203
Got: 203
Put: 204
Got: 204
Put: 205
Got: 205
Put: 206
Got: 206
Put: 207
Got: 207
Put: 208
Got: 208
Put: 209
Got: 209
Put: 210
Got: 210
Put: 211
Got: 211
Put: 212
Got: 212
Put: 213
Got: 213
Put: 214
Got: 214
Put: 215
Got: 215
Put: 216
Got: 216
Put: 217
Got: 217
Put: 218
Got: 218
Put: 219
Got: 219
Put: 220
Got: 220
Put: 221
Got: 221
Put: 222
Got: 222
Put: 223
Got: 223
Put: 224
Got: 224
Put: 225
Got: 225
Put: 226
Got: 226
Put: 227
Got: 227
Put: 228
Got: 228
Put: 229
Got: 229
Put: 230
Got: 230
Put: 231
Got: 231
Put: 232
Got: 232
Put: 233
Got: 233
Put: 234
Got: 234
Put: 235
Got: 235
Put: 236
Got: 236
Put: 237
Got: 237
Put: 238
Got: 238
Put: 239
Got: 239
Put: 240
Got: 240
Put: 241
Got: 241
Put: 242
Got: 242
Put: 243
Got: 243
Put: 244
Got: 244
Put: 245
Got: 245
Put: 246
Got: 246
Put: 247
Got: 247
Put: 248
Got: 248
Put: 249
Got: 249
Put: 250
Got: 250
Put: 251
Got: 251
Put: 252
Got: 252
Put: 253
Got: 253
Put: 254
Got: 254
Put: 255
Got: 255
Put: 256
Got: 256
Put: 257
Got: 257
Put: 258
Got: 258
Put: 259
Got: 259
Put: 260
Got: 260
Put: 261
Got: 261
Put: 262
Got: 262
Put: 263
Got: 263
Put: 264
Got: 264
Put: 265
Got: 265
Put: 266
Got: 266
Put: 267
Got: 267
Put: 268
Got: 268
Put: 269
Got: 269
Put: 270
Got: 270
Put: 271
Got: 271
Put: 272
Got: 272
Put: 273
Got: 273
Put: 274
Got: 274
Put: 275
Got: 275
Put: 276
Got: 276
Put: 277
Got: 277
Put: 278
Got: 278
Put: 279
Got: 279
Put: 280
Got: 280
Put: 281
Got: 281
Put: 282
Got: 282
Put: 283
Got: 283
Put: 284
Got: 284
Put: 285
Got: 285
Put: 286
Got: 286
Put: 287
Got: 287
Put: 288
Got: 288
Put: 289
Got: 289
Put: 290
Got: 290
Put: 291
Got: 291
Put: 292
Got: 292
Put: 293
Got: 293
Put: 294
Got: 294
Put: 295
Got: 295
Put: 296
Got: 296
Put: 297
Got: 297
Put: 298
Got: 298
Put: 299
Got: 299
Put: 300
Got: 300
Put: 301
Got: 301
Put: 302
Got: 302
Put: 303
Got: 303
Put: 304
Got: 304
Put: 305
Got: 305
Put: 306
Got: 306
Put: 307
Got: 307
Put: 308
Got: 308
Put: 309
Got: 309
Put: 310
Got: 310
Put: 311
Got: 311
Put: 312
Got: 312
Put: 313
Got: 313
Put: 314
Got: 314
Put: 315
Got: 315
Put: 316
Got: 316
Put: 317
Got: 317
Put: 318
Got: 318
Put: 319
Got: 319
Put: 320
Got: 320
Put: 321
Got: 321
Put: 322
Got: 322
Put: 323
Got: 323
Put: 324
Got: 324
Put: 325
Got: 325
Put: 326
Got: 326
Put: 327
Got: 327
Put: 328
Got: 328
Put: 329
Got: 329
Put: 330
Got: 330
Put: 331
Got: 331
Put: 332
Got: 332
Put: 333
Got: 333
Put: 334
Got: 334
Put: 335
Got: 335
Put: 336
Got: 336
Put: 337
Got: 337
Put: 338
Got: 338
Put: 339
Got: 339
Put: 340
Got: 340
Put: 341
Got: 341
Put: 342
Got: 342
Put: 343
Got: 343
Put: 344
Got: 344
Put: 345
Got: 345
Put: 346
Got: 346
Put: 347
Got: 347
Put: 348
Got: 348
Put: 349
Got: 349
Put: 350
Got: 350
Put: 351
Got: 351
Put: 352
Got: 352
Put: 353
Got: 353
Put: 354
Got: 354
Put: 355
Got: 355
Put: 356
Got: 356
Put: 357
Got: 357
Put: 358
Got: 358
Put: 359
Got: 359
Put: 360
Got: 360
Put: 361
Got: 361
Put: 362
Got: 362
Put: 363
Got: 363
Put: 364
Got: 364
Put: 365
Got: 365
Put: 366
Got: 366
Put: 367
Got: 367
Put: 368
Got: 368
Put: 369
Got: 369
Put: 370
Got: 370
Put: 371
Got: 371
Put: 372
Got: 372
Put: 373
Got: 373
Put: 374
Got: 374
Put: 375
Got: 375
Put: 376
Got: 376
Put: 377
Got: 377
Put: 378
Got: 378
Put: 379
Got: 379
Put: 380
Got: 380
Put: 381
Got: 381
Put: 382
Got: 382
Put: 383
Got: 383
Put: 384
Got: 384
Put: 385
Got: 385
Put: 386
Got: 386
Put: 387
Got: 387
Put: 388
Got: 388
Put: 389
Got: 389
Put: 390
Got: 390
Put: 391
Got: 391
Put: 392
Got: 392
Put: 393
Got: 393
Put: 394
Got: 394
Put: 395
Got: 395
Put: 396
Got: 396
Put: 397
Got: 397
Put: 398
Got: 398
Put: 399
Got: 399
Put: 400
Got: 400
Put: 401
Got: 401
Put: 402
Got: 402
Put: 403
Got: 403
Put: 404
Got: 404
Put: 405
Got: 405
Put: 406
Got: 406
Put: 407
Got: 407
Put: 408
Got: 408
Put: 409
Got: 409
Put: 410
Got: 410
Put: 411
Got: 411
Put: 412
Got: 412
Put: 413
Got: 413
Put: 414
Got: 414
Put: 415
Got: 415
Put: 416
Got: 416
Put: 417
Got: 417
Put: 418
Got: 418
Put: 419
Got: 419
Put: 420
Got: 420
Put: 421
Got: 421
Put: 422
Got: 422
Put: 423
Got: 423
Put: 424
Got: 424
Put: 425
Got: 425
Put: 426
Got: 426
Put: 427
Got: 427
Put: 428
Got: 428
Put: 429
Got: 429
Put: 430
Got: 430
Put: 431
Got: 431
Put: 432
Got: 432
Put: 433
Got: 433
Put: 434
Got: 434
Put: 435
Got: 435
Put: 436
Got: 436
Put: 437
Got: 437
Put: 438
Got: 438
Put: 439
Got: 439
Put: 440
Got: 440
Put: 441
Got: 441
Put: 442
Got: 442
Put: 443
Got: 443
Put: 444
Got: 444
Put: 445
Got: 445
Put: 446
Got: 446
Put: 447
Got: 447
Put: 448
Got: 448
Put: 449
Got: 449
Put: 450
^C
*/